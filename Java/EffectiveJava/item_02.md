# 아이템 2. 생성자에 매개변수가 많다면 빌더를 고려하라

정적 팩터리와 생성자는 선택적 매개변수가 많을 때 적절히 대응하기 어렵다.

## 해결책 1: 점층적 생성자 패턴(telescoping constructor pattern)

- 필수 매개변수만 받는 생성자, 필수 매개변수와 선택 매개변수를 1개에서 전부 다 받는 생성자까지 늘려가는 방식
- 사용자가 설정하길 원치 않는 매개변수에도 값을 지정해야 함
- 매개변수가 많아지면 클라이언트 코드를 작성하거나 읽기 어려움

## 해결책 2: 자바빈즈 패턴(JavaBeans pattern)

- 매개변수가 없는 생성자로 객체를 만든 후, 세터(setter) 메서드들을 호출해 원하는 매개변수의 값을 설정하는 방식
- 메서드를 여러 개 호출해야 하고, 객체가 완전히 생성되기 전까지는 일관성이 무너진 상태에 놓임
- 클래스를 불변([아이템 17](item_17.md))으로 만들 수 없음

## 해결책 3: 빌더 패턴(Builder pattern)

- 빌더 패턴 단계
  1. 필수 매개변수만으로 생성자(혹은 정적 팩터리)를 호출해 빌더 객체를 얻음
  2. 빌더 객체가 제공하는 일종의 세터 메서드들로 원하는 선택 매개변수들 설정
  3. 매개변수가 없는 build 메서드를 호출해 필요한 객체를 얻음
- 빌더는 생성할 클래스 안에 정적 멤버 클래스로 만드는 것이 보통
- 빌더 패턴은 계층적으로 설계된 클래스와 함께 쓰기 좋음
- 장점
  - 가변인수(varargs) 매개변수를 여러 개 사용 가능
  - 유연성: 빌더 하나로 여러 객체를 순회하면서 만들거나 빌더에 넘기는 매개변수에 따라 다른 객체 생성 가능
- 단점
  - 빌더 생성 비용이 크지는 않지만 성능에 민감한 상황에서는 문제가 될 수 있음
  - 코드가 장황해서 매개변수가 4개 이상인 경우 유용함(하지만 API는 시간이 지날수록 매개변수가 많아지는 경향이 있음)

## 핵심 정리

- 생성자나 정적 팩터리가 처리해야 할 매개변수가 많다면 빌더 패턴을 선택하는 게 더 낫다
- 빌더는 점층적 생성자보다 클라이언트 코드를 일고 쓰기가 훨씬 갈결하고, 자바빈즈보다 훨씬 안전하다

## 테스트 코드

- [https://github.com/jsyang-dev/study-effective-java/tree/master/src/item02](https://github.com/jsyang-dev/study-effective-java/tree/master/src/item02)
